<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>TSP • Asignador de Ciclos</title>
<style>
  :root{--p600:#2147b0;--p700:#1a3a8c;--p50:#eef3ff;--g100:#f5f5f5;--g300:#e6e6e6;--label:.84rem;--gap:10px;--field:16px;--h:44px}
  body{margin:0;background:linear-gradient(180deg,var(--g100),#fff);color:#0f172a;font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
  .top{background:linear-gradient(135deg,var(--p600),var(--p700));color:#fff}
  .topin{max-width:1200px;margin:0 auto;padding:12px 18px;display:flex;gap:10px;align-items:center;justify-content:space-between}
  .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;font-weight:600;cursor:pointer}
  .btn-primary{background:var(--p600);color:#fff}.btn-primary:hover{background:var(--p700)}
  .btn-soft{background:#e7eaf7}
  .wrap{max-width:1200px;margin:18px auto;padding:0 16px;display:grid;grid-template-columns:380px 1fr;gap:20px}
  .card{background:#fff;border:1px solid var(--g300);border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.04)}
  .ch{padding:14px 18px;border-bottom:1px solid var(--g300)} .cb{padding:16px 18px}
  .fg{display:flex;flex-direction:column;margin:0 0 var(--field)}
  .fg label{font-size:var(--label);font-weight:600;color:#3a4557;margin:0 0 var(--gap)}
  .in{height:var(--h);border:1px solid var(--g300);border-radius:12px;padding:0 12px;font-size:.95rem}
  .in:focus{outline:none;border-color:#2147b0;box-shadow:0 0 0 3px rgba(33,71,176,.12)}
  .muted{color:#6b7280;font-size:.9rem}
  .list{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:10px}
  .item{border:1px solid var(--g300);border-radius:12px;padding:10px}
</style>
</head>
<body>
  <header class="top"><div class="topin">
    <div><strong>Asignador de Ciclos</strong></div>
    <div>
      <a class="btn btn-soft" href="/pages/admin/admin-dashboard.html">Volver al Panel</a>
      <a class="btn btn-soft" href="/pages/admin/ciclos.html">Ir a Catálogo</a>
    </div>
  </div></header>

  <main class="wrap">
    <section class="card">
      <div class="ch"><h3 style="margin:0">Parámetros de asignación</h3></div>
      <div class="cb">
        <div class="fg"><label>Institución</label><select id="inst" class="in"></select></div>
        <div class="fg"><label>Grupos (marca uno o varios)</label><div id="grupos" class="list"></div></div>
        <hr style="border:none;border-top:1px solid var(--g300);margin:10px 0">
        <div class="fg"><label>Ciclo</label><select id="ciclo" class="in"></select></div>
        <div class="fg"><label>Fecha de inicio</label><input id="inicio" type="date" class="in"></div>
        <div class="fg"><label>Periodicidad (texto, opcional)</label><input id="periodicidad" class="in" placeholder="semanal / diaria / etc."></div>
        <div class="fg"><label>Día de semana (0–6, opcional)</label><input id="dia" type="number" min="0" max="6" class="in" placeholder="1=Lunes"></div>
        <button id="btnAsignar" class="btn btn-primary">Asignar a seleccionados</button>
        <div id="msg" class="muted" style="margin-top:8px"></div>
      </div>
    </section>

    <section class="card">
      <div class="ch"><h3 style="margin:0">Asignaciones recientes</h3></div>
      <div class="cb"><div id="tabla"></div></div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    window.__TSP__ = {
      SUPABASE_URL: 'https://kryqjsncqsopjuwymhqd.supabase.co',
      SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtyeXFqc25jcXNvcGp1d3ltaHFkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMjM3MDEsImV4cCI6MjA2ODg5OTcwMX0.w5HiaFiqlFJ_3QbcprUrufsOXTDWFg1zUMl2J7kWD6Y'
    };
  </script>
  <script type="module" src="./asignar-ciclos.js"></script>
</body>
</html>
